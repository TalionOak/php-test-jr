{"ast":null,"code":"var _jsxFileName = \"C:\\\\Projetos\\\\teste1\\\\php-test-jr\\\\frontend\\\\src\\\\components\\\\AvailableBooks.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport api from '../services/api';\nimport styled from 'styled-components';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Container = styled.div`\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n`;\n_c = Container;\nconst Title = styled.h2`\n  color: #2c3e50;\n  border-bottom: 2px solid #3498db;\n  padding-bottom: 10px;\n`;\n_c2 = Title;\nconst BookGrid = styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n  gap: 20px;\n  margin-top: 20px;\n`;\n_c3 = BookGrid;\nconst BookCard = styled.div`\n  background-color: #f9f9f9;\n  border: 1px solid #e0e0e0;\n  border-radius: 8px;\n  padding: 15px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n  transition: all 0.3s ease;\n\n  &:hover {\n    transform: translateY(-5px);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\n  }\n`;\n_c4 = BookCard;\nconst BookTitle = styled.h3`\n  color: #2980b9;\n  margin-top: 0;\n  font-size: 1.2em;\n`;\n_c5 = BookTitle;\nconst BookInfo = styled.p`\n  margin: 5px 0;\n  color: #34495e;\n  font-size: 0.9em;\n`;\n_c6 = BookInfo;\nconst BorrowButton = styled.button`\n  background-color: #2ecc71;\n  color: white;\n  border: none;\n  padding: 10px 15px;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: background-color 0.3s;\n  margin-top: 10px;\n\n  &:hover {\n    background-color: #27ae60;\n  }\n\n  &:disabled {\n    background-color: #95a5a6;\n    cursor: not-allowed;\n  }\n`;\n_c7 = BorrowButton;\nfunction AvailableBooks() {\n  _s();\n  const [books, setBooks] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const userId = 1;\n  useEffect(() => {\n    const fetchBooks = async () => {\n      try {\n        const response = await api.get('/books/available');\n        setBooks(response.data);\n      } catch (error) {\n        console.error('Erro ao buscar livros disponíveis:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchBooks();\n  }, []);\n  const handleBorrow = async bookId => {\n    try {\n      await api.get(`/borrow/${bookId}/user/${userId}`);\n      const updatedBooks = books.map(book => book.id === bookId ? {\n        ...book,\n        active_loans: book.active_loans + 1\n      } : book);\n      setBooks(updatedBooks);\n      alert('Livro emprestado com sucesso!');\n    } catch (error) {\n      console.error('Erro ao emprestar o livro:', error);\n      alert('Erro ao emprestar o livro. Por favor, tente novamente.');\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Carregando...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      children: \"Livros Dispon\\xEDveis\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BookGrid, {\n      children: books.map(book => /*#__PURE__*/_jsxDEV(BookCard, {\n        children: [/*#__PURE__*/_jsxDEV(BookTitle, {\n          children: book.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(BookInfo, {\n          children: [\"Autor: \", book.author]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(BookInfo, {\n          children: [\"ISBN: \", book.isbn]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(BookInfo, {\n          children: [\"Ano de publica\\xE7\\xE3o: \", book.publication_year]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(BookInfo, {\n          children: [\"Total de c\\xF3pias: \", book.total_copies]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(BookInfo, {\n          children: [\"Empr\\xE9stimos ativos: \", book.active_loans]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(BorrowButton, {\n          onClick: () => handleBorrow(book.id),\n          disabled: book.active_loans >= book.total_copies,\n          children: book.active_loans >= book.total_copies ? 'Indisponível' : 'Pegar emprestado'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }, this)]\n      }, book.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 109,\n    columnNumber: 5\n  }, this);\n}\n_s(AvailableBooks, \"ChkvWGV9GOBJOq4oIXyrg5ci6S0=\");\n_c8 = AvailableBooks;\nexport default AvailableBooks;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n$RefreshReg$(_c, \"Container\");\n$RefreshReg$(_c2, \"Title\");\n$RefreshReg$(_c3, \"BookGrid\");\n$RefreshReg$(_c4, \"BookCard\");\n$RefreshReg$(_c5, \"BookTitle\");\n$RefreshReg$(_c6, \"BookInfo\");\n$RefreshReg$(_c7, \"BorrowButton\");\n$RefreshReg$(_c8, \"AvailableBooks\");","map":{"version":3,"names":["React","useState","useEffect","api","styled","jsxDEV","_jsxDEV","Container","div","_c","Title","h2","_c2","BookGrid","_c3","BookCard","_c4","BookTitle","h3","_c5","BookInfo","p","_c6","BorrowButton","button","_c7","AvailableBooks","_s","books","setBooks","loading","setLoading","userId","fetchBooks","response","get","data","error","console","handleBorrow","bookId","updatedBooks","map","book","id","active_loans","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","title","author","isbn","publication_year","total_copies","onClick","disabled","_c8","$RefreshReg$"],"sources":["C:/Projetos/teste1/php-test-jr/frontend/src/components/AvailableBooks.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport api from '../services/api';\r\nimport styled from 'styled-components';\r\n\r\nconst Container = styled.div`\r\n  max-width: 1200px;\r\n  margin: 0 auto;\r\n  padding: 20px;\r\n`;\r\n\r\nconst Title = styled.h2`\r\n  color: #2c3e50;\r\n  border-bottom: 2px solid #3498db;\r\n  padding-bottom: 10px;\r\n`;\r\n\r\nconst BookGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\r\n  gap: 20px;\r\n  margin-top: 20px;\r\n`;\r\n\r\nconst BookCard = styled.div`\r\n  background-color: #f9f9f9;\r\n  border: 1px solid #e0e0e0;\r\n  border-radius: 8px;\r\n  padding: 15px;\r\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\r\n  transition: all 0.3s ease;\r\n\r\n  &:hover {\r\n    transform: translateY(-5px);\r\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);\r\n  }\r\n`;\r\n\r\nconst BookTitle = styled.h3`\r\n  color: #2980b9;\r\n  margin-top: 0;\r\n  font-size: 1.2em;\r\n`;\r\n\r\nconst BookInfo = styled.p`\r\n  margin: 5px 0;\r\n  color: #34495e;\r\n  font-size: 0.9em;\r\n`;\r\n\r\nconst BorrowButton = styled.button`\r\n  background-color: #2ecc71;\r\n  color: white;\r\n  border: none;\r\n  padding: 10px 15px;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  transition: background-color 0.3s;\r\n  margin-top: 10px;\r\n\r\n  &:hover {\r\n    background-color: #27ae60;\r\n  }\r\n\r\n  &:disabled {\r\n    background-color: #95a5a6;\r\n    cursor: not-allowed;\r\n  }\r\n`;\r\n\r\nfunction AvailableBooks() {\r\n  const [books, setBooks] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const userId = 1;\r\n\r\n  useEffect(() => {\r\n    const fetchBooks = async () => {\r\n      try {\r\n        const response = await api.get('/books/available');\r\n        setBooks(response.data);\r\n      } catch (error) {\r\n        console.error('Erro ao buscar livros disponíveis:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchBooks();\r\n  }, []);\r\n\r\n  const handleBorrow = async (bookId) => {\r\n    try {\r\n      await api.get(`/borrow/${bookId}/user/${userId}`);\r\n      const updatedBooks = books.map(book =>\r\n        book.id === bookId\r\n          ? { ...book, active_loans: book.active_loans + 1 }\r\n          : book\r\n      );\r\n      setBooks(updatedBooks);\r\n      alert('Livro emprestado com sucesso!');\r\n    } catch (error) {\r\n      console.error('Erro ao emprestar o livro:', error);\r\n      alert('Erro ao emprestar o livro. Por favor, tente novamente.');\r\n    }\r\n  };\r\n\r\n  if (loading) return <p>Carregando...</p>;\r\n\r\n  return (\r\n    <Container>\r\n      <Title>Livros Disponíveis</Title>\r\n      <BookGrid>\r\n        {books.map((book) => (\r\n          <BookCard key={book.id}>\r\n            <BookTitle>{book.title}</BookTitle>\r\n            <BookInfo>Autor: {book.author}</BookInfo>\r\n            <BookInfo>ISBN: {book.isbn}</BookInfo>\r\n            <BookInfo>Ano de publicação: {book.publication_year}</BookInfo>\r\n            <BookInfo>Total de cópias: {book.total_copies}</BookInfo>\r\n            <BookInfo>Empréstimos ativos: {book.active_loans}</BookInfo>\r\n            <BorrowButton\r\n              onClick={() => handleBorrow(book.id)}\r\n              disabled={book.active_loans >= book.total_copies}\r\n            >\r\n              {book.active_loans >= book.total_copies ? 'Indisponível' : 'Pegar emprestado'}\r\n            </BorrowButton>\r\n          </BookCard>\r\n        ))}\r\n      </BookGrid>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default AvailableBooks;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}